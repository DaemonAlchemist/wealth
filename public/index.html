<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>How Wealthy Am I?</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f7fa;
      color: #333;
      margin: 0;
      padding: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 {
      margin-bottom: 20px;
      color: #222;
    }

    .container {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      padding: 30px 40px;
      width: 100%;
      max-width: 500px;
    }

    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
    }

    select {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1em;
      transition: border 0.2s ease;
    }

    select:focus {
      outline: none;
      border-color: #2e86de;
    }

    #result, #class-level {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: bold;
      color: #2e86de !important;
      text-align: center;
    }
  </style>
</head>
<body>

  <h2>How Wealthy Am I?</h2>

  <div class="container">
    <label>Your Self-Perception:
      <select id="perception">
        <option value="">— Select —</option>
        <option value="Lower Class">Lower Class</option>
        <option value="Lower-Middle Class">Lower-Middle Class</option>
        <option value="Middle Class">Middle Class</option>
        <option value="Upper-Middle Class">Upper-Middle Class</option>
        <option value="Affluent">Affluent</option>
        <option value="High Net Worth Individual">High Net Worth Individual</option>
        <option value="Wealth Elite">Wealth Elite</option>
        <option value="Upper Class">Upper Class</option>
      </select>
    </label>
    
    <label>Income Level:
      <select id="income">
        <option value="Extremely Low">Extremely Low: &lt;$15,000</option>
        <option value="Very Low">Very Low: $15,000–$30,000</option>
        <option value="Low">Low: $30,000–$60,000</option>
        <option value="Moderate">Moderate: $60,000–$120,000</option>
        <option value="High">High: $120,000–$250,000</option>
        <option value="Very High">Very High: $250,000–$500,000</option>
        <option value="Ultra High">Ultra High: &gt;$500,000</option>
      </select>
    </label>

    <label>Expense Level:
      <select id="expenses">
        <option value="Extremely Low">Extremely Low: &lt;$15,000</option>
        <option value="Very Low">Very Low: $15,000–$30,000</option>
        <option value="Low">Low: $30,000–$60,000</option>
        <option value="Moderate">Moderate: $60,000–$120,000</option>
        <option value="High">High: $120,000–$200,000</option>
        <option value="Very High">Very High: $200,000–$350,000</option>
        <option value="Ultra High">Ultra High: &gt;$350,000</option>
      </select>
    </label>

    <label>Liquid Assets (cash, checking, savings, etc.):
      <select id="liquid">
        <option value="None">None: $0</option>
        <option value="Tiny">Tiny: $1–$1,000</option>
        <option value="Very Low">Very Low: $1,000–$5,000</option>
        <option value="Low">Low: $5,000–$25,000</option>
        <option value="Moderate">Moderate: $25,000–$100,000</option>
        <option value="High">High: $100,000–$500,000</option>
        <option value="Very High">Very High: $500,000–$1,000,000</option>
        <option value="Ultra High">Ultra High: &gt;$1,000,000</option>
      </select>
    </label>

    <label>Hard Assets (real estate, retirement, stocks, etc.):
      <select id="hard">
        <option value="None">None: $0</option>
        <option value="Tiny">Tiny: $1–$5,000</option>
        <option value="Very Low">Very Low: $5,000–$25,000</option>
        <option value="Low">Low: $25,000–$100,000</option>
        <option value="Moderate">Moderate: $100,000–$500,000</option>
        <option value="High">High: $500,000–$2,000,000</option>
        <option value="Very High">Very High: $2,000,000–$10,000,000</option>
        <option value="Ultra High">Ultra High: &gt;$10,000,000</option>
      </select>
    </label>

    <label>Debt Level:
      <select id="debt">
        <option value="None">None: $0</option>
        <option value="Low">Low: $1–$10,000</option>
        <option value="Moderate">Moderate: $10,000–$50,000</option>
        <option value="High">High: $50,000–$150,000</option>
        <option value="Very High">Very High: $150,000–$500,000</option>
        <option value="Extreme">Extreme: Over $500,000</option>
      </select>
    </label>
    
    <div id="class-level" style="margin-top: 10px; font-weight: bold; color: #555;"></div>
    <div id="percentile-info" style="margin-top: 10px; font-style: italic;"></div>
    <div id="perception-warning" style="margin-top: 10px; color: #a94442;"></div>
    <details style="margin-top: 15px; max-width: 480px;">
      <summary style="cursor:pointer; font-weight: bold; color: #2e86de;">
        Why do people misjudge their financial status?
      </summary>
      <div style="margin-top: 10px; font-size: 0.95em; color: #444; line-height: 1.5;">
        <ul style="padding-left: 20px;">
          <li><strong>Social comparison:</strong> We tend to compare with friends or neighbors who are similar or wealthier.</li>
          <li><strong>Local norms:</strong> Living in a high-cost or affluent area distorts your sense of “normal.”</li>
          <li><strong>Lifestyle inflation:</strong> As income rises, so do expenses—masking actual financial progress.</li>
          <li><strong>Media exposure:</strong> Constant visibility of ultra-wealthy lifestyles skews expectations.</li>
          <li><strong>Asset invisibility:</strong> Things like retirement savings or property equity aren't felt daily.</li>
        </ul>
        <p>Objective tools like this one help ground your understanding in real-world data, not just perception.</p>
      </div>
    </details>
    
    <div id="class-description" style="margin-top: 10px; line-height: 1.5;"></div>
    <div id="resources-classes" style="margin-top: 20px;"></div>

    <div id="result">Classification: —</div>
    <div id="details" style="margin-top: 20px; line-height: 1.5;"></div>
    <div id="resources-feelings" style="margin-top: 20px;"></div>

  </div>

  <script>
    const incomeRanks = ['Extremely Low', 'Very Low', 'Low', 'Moderate', 'High', 'Very High', 'Ultra High'];
    const assetRanks = ['None', 'Tiny', 'Very Low', 'Low', 'Moderate', 'High', 'Very High', 'Ultra High'];
    const debtRanks = ['None', 'Low', 'Moderate', 'High', 'Very High', 'Extreme'];

    const incomeValues = {
      "Extremely Low": 10000,
      "Very Low": 22500,
      "Low": 45000,
      "Moderate": 90000,
      "High": 180000,
      "Very High": 375000,
      "Ultra High": 750000
    };

    const expenseValues = {
      "Extremely Low": 10000,
      "Very Low": 22500,
      "Low": 45000,
      "Moderate": 90000,
      "High": 160000,
      "Very High": 275000,
      "Ultra High": 400000
    };

    const liquidValues = {
      "None": 0,
      "Tiny": 500,
      "Very Low": 3000,
      "Low": 15000,
      "Moderate": 60000,
      "High": 300000,
      "Very High": 750000,
      "Ultra High": 1500000
    };

    const hardValues = {
      "None": 0,
      "Tiny": 3000,
      "Very Low": 15000,
      "Low": 60000,
      "Moderate": 300000,
      "High": 1250000,
      "Very High": 6000000,
      "Ultra High": 15000000
    };

    const debtValues = {
      "None": 0,
      "Low": 5000,
      "Moderate": 30000,
      "High": 100000,
      "Very High": 300000,
      "Extreme": 600000
    };

    const profileMap = {
      "Underwater": {
        desc: `You're overwhelmed. Debt and expenses exceed your income, and you're likely behind on payments or relying on credit to survive.`,
        steps: `• Seek nonprofit debt counseling.<br>• Cut recurring non-essentials fast.<br>• Focus on stabilizing one category (income or expenses) first.`
      },
      "Scraping By": {
        desc: `You're surviving month-to-month with minimal income and no room for error. Savings are nonexistent.`,
        steps: `• Apply for local/state assistance.<br>• Prioritize small but consistent savings habits.<br>• Explore quick upskilling or certifications.`
      },
      "Debt-Weighted": {
        desc: `You have income, but it's mostly spoken for due to debt repayments or obligations. Progress is slow or stalled.`,
        steps: `• Refinance high-interest debt.<br>• Automate minimums, and target one balance at a time.<br>• Avoid new credit activity.`
      },
      "House Rich, Cash Poor": {
        desc: `Most of your wealth is tied up in real estate or hard assets. Liquidity is very low, making you financially inflexible.`,
        steps: `• Look into HELOCs or asset refinancing.<br>• Shift some savings into liquid instruments.<br>• Don’t overextend on upgrades or new purchases.`
      },
      "Fragile Middle": {
        desc: `You're earning and spending about the same. Small gains can be undone by one bad month.`,
        steps: `• Identify 5–10% of expenses to cut.<br>• Focus on building a small emergency buffer.<br>• Look for ways to increase income margin.`
      },
      "Building Margin": {
        desc: `You're beginning to widen the gap between what you earn and what you spend. You’re gaining traction.`,
        steps: `• Automate savings and retirement contributions.<br>• Begin investing even small amounts monthly.<br>• Avoid unnecessary fixed expenses.`
      },
      "Cashflow Positive, Asset Light": {
        desc: `You're good at saving but haven't built long-term assets yet. Wealth is still in motion, not stored.`,
        steps: `• Begin investing in retirement or low-cost brokerage accounts.<br>• Set long-term targets and timelines.<br>• Build asset diversity beyond savings.`
      },
      "Comfortably Liquid": {
        desc: `You have savings, good income, and financial control. You're resilient and poised for long-term growth.`,
        steps: `• Consider laddered CDs or diversified ETFs.<br>• Build medium-term goal funds (e.g., travel, car, education).<br>• Increase retirement contribution rates.`
      },
      "Growth-Oriented Investor": {
        desc: `You're using your income and assets to build real long-term wealth. You're playing the long game.`,
        steps: `• Review your asset allocation annually.<br>• Diversify income streams where possible.<br>• Guard against lifestyle creep.`
      },
      "Outwardly Wealthy, Internally Stressed": {
        desc: `Your income and lifestyle are high, but so are your fixed costs or debts. You’re stretched thin beneath the surface.`,
        steps: `• Audit and downsize recurring expenses.<br>• Consider asset liquidation to regain liquidity.<br>• Shift focus to financial flexibility.`
      },
      "Financially Independent": {
        desc: `Your income from investments or passive sources covers your lifestyle. You have full control of your time.`,
        steps: `• Protect assets with smart legal structures.<br>• Continue strategic giving or mentoring.<br>• Rebalance portfolios yearly.`
      },
      "Multi-Generational Wealth": {
        desc: `You've built or inherited enough wealth to think in terms of legacy and structure. You're stewarding resources, not just spending.`,
        steps: `• Use trusts, donor-advised funds, or private entities.<br>• Focus on education and values within the family.<br>• Regularly review wealth continuity plans.`
      }
    };

    const classDescriptions = {
      "Lower Class": {
        desc: `You are in a financially vulnerable position. Your income likely doesn't cover all essentials, and you may depend on assistance, community support, or irregular work. Basic needs like stable housing or healthcare may feel out of reach.`,
        steps: `• <strong>Increase Income:</strong> Explore job training, certifications, or community employment programs.<br>
                • <strong>Reduce Expenses:</strong> Apply for local housing, food, and utility subsidies to free up cash.<br>
                • <strong>Start Saving:</strong> Open a basic savings account and commit to setting aside even small amounts weekly.<br>
                • <strong>Avoid Risky Debt:</strong> Avoid payday lenders and focus on building cash stability first.`
      },
      "Lower-Middle Class": {
        desc: `You’re making ends meet with modest income, but money remains tight. You may have some savings or employer benefits, but unexpected costs can still derail your progress.`,
        steps: `• <strong>Boost Income:</strong> Look for higher-paying roles, side gigs, or additional hours.<br>
                • <strong>Control Spending:</strong> Audit subscriptions and lifestyle habits for quick wins.<br>
                • <strong>Build a Safety Net:</strong> Target a $500–$1,500 emergency fund.<br>
                • <strong>Start Investing:</strong> If available, contribute even 1% to an employer-sponsored retirement plan.`
      },
      "Middle Class": {
        desc: `You have a steady income, can afford some discretionary spending, and may be building early-stage assets. Still, liquidity may be low, and long-term financial security isn’t guaranteed.`,
        steps: `• <strong>Maximize Earnings:</strong> Ask for raises or consider income diversification like freelancing.<br>
                • <strong>Budget Surplus:</strong> Track and optimize spending to build monthly surplus.<br>
                • <strong>Emergency Fund:</strong> Aim for 3 months of living expenses saved.<br>
                • <strong>Invest for Growth:</strong> Begin building long-term wealth through retirement and brokerage accounts.`
      },
      "Upper-Middle Class": {
        desc: `You're on solid financial footing with strong income and a growing portfolio. You likely have insurance, savings, and investment vehicles in place. The challenge is maintaining momentum and avoiding lifestyle creep.`,
        steps: `• <strong>Maximize Benefits:</strong> Contribute fully to employer matches and bonus savings opportunities.<br>
                • <strong>Invest Intentionally:</strong> Diversify into assets beyond salary (e.g. stocks, real estate).<br>
                • <strong>Guard Against Inflation:</strong> Avoid letting income gains lead to excessive lifestyle upgrades.<br>
                • <strong>Plan Strategically:</strong> Define clear mid- and long-term goals.`
      },
      "Affluent": {
        desc: `You're in the top earning brackets with strong assets, diversified income, and long-term potential. You're likely investing for more than just retirement—perhaps for business ventures, education, or legacy.`,
        steps: `• <strong>Convert Income:</strong> Shift from active to passive or leveraged income streams.<br>
                • <strong>Optimize Taxes:</strong> Utilize tax-efficient accounts and deductions.<br>
                • <strong>Monitor Spending:</strong> Ensure your spending aligns with long-term goals, not short-term comfort.<br>
                • <strong>Balance Risk:</strong> Diversify across real estate, equities, and possibly private markets.`
      },
      "High Net Worth Individual": {
        desc: `You’ve crossed into a realm of substantial wealth—likely over $1M in assets. Your focus may be shifting from building wealth to managing, protecting, and planning its transfer.`,
        steps: `• <strong>Refine Strategy:</strong> Work with advisors to optimize taxes, estate plans, and risk exposure.<br>
                • <strong>Preserve Capital:</strong> Focus on sustainable yields and long-term wealth resilience.<br>
                • <strong>Legacy Planning:</strong> Consider how your wealth aligns with your values and long-term goals.<br>
                • <strong>Educate Family:</strong> Begin sharing financial principles with the next generation.`
      },
      "Wealth Elite": {
        desc: `You’re among the ultra-wealthy, with financial freedom spanning generations. Your concerns likely revolve around legacy, control, philanthropy, and stewardship rather than accumulation.`,
        steps: `• <strong>Structure Wealth:</strong> Use trusts, family offices, or foundations to manage complexity.<br>
                • <strong>Engage in Planning:</strong> Collaborate with estate and tax experts for multi-generational alignment.<br>
                • <strong>Give Back:</strong> Consider formal philanthropy as part of your identity and impact.<br>
                • <strong>Simplify:</strong> Delegate or automate where possible to reduce decision fatigue and focus on purpose.`
      },
      "Upper Class": {
        desc: `You have high income and a strong, diversified asset base. Your lifestyle is likely comfortable, and you may have influence within your community or industry.`,
        steps: `• <strong>Leverage Position:</strong> Use your financial strength to shape long-term investment or philanthropic goals.<br>
                • <strong>Protect Wealth:</strong> Maintain appropriate legal and tax shields.<br>
                • <strong>Optimize Giving:</strong> Consider donor-advised funds, charitable trusts, or other high-leverage giving tools.<br>
                • <strong>Build Continuity:</strong> Document family values and financial education strategies.`
      }
    };

    const resources = {
        "feelings": {
            "Surviving": [
            {
                "title": "The Total Money Makeover",
                "author": "Dave Ramsey",
                "url": "https://amzn.to/3StRIB9"
            },
            {
                "title": "Clever Fox Budget Planner",
                "author": "",
                "url": "https://amzn.to/4dCE8oG"
            }
            ],
            "Struggling": [
            {
                "title": "Your Money or Your Life",
                "author": "Vicki Robin",
                "url": "https://amzn.to/4kj0U7E"
            },
            {
                "title": "Clever Fox Budget Planner Premium Edition",
                "author": "",
                "url": "https://amzn.to/3FhbjBP"
            }
            ],
            "Treading Water": [
            {
                "title": "I Will Teach You to Be Rich",
                "author": "Ramit Sethi",
                "url": "https://amzn.to/3StRzO7"
            },
            {
                "title": "The In-Case-of-Emergency Workbook",
                "author": "Vicki Hinze",
                "url": "https://amzn.to/3ZI7Pim"
            }
            ],
            "Stable": [
            {
                "title": "The Psychology of Money",
                "author": "Morgan Housel",
                "url": "https://amzn.to/4jurpWu"
            },
            {
                "title": "Net Worth Tracker",
                "author": "Financial Life Press",
                "url": "https://amzn.to/4kkgsIr"
            }
            ],
            "Comfortable": [
            {
                "title": "Money: Master the Game",
                "author": "Tony Robbins",
                "url": "https://amzn.to/4ki0vSS"
            },
            {
                "title": "Investments: Analysis and Management",
                "author": "Gerald R. Jensen and Charles P. Jones",
                "url": "https://amzn.to/43ns6fJ"
            }
            ],
            "Building Up": [
            {
                "title": "Set for Life",
                "author": "Scott Trench",
                "url": "https://amzn.to/4jvDta2"
            },
            {
                "title": "The Wealthy Gardener",
                "author": "John Soforic",
                "url": "https://amzn.to/45kQKPx"
            }
            ],
            "Overstretched": [
            {
                "title": "Quit Like a Millionaire",
                "author": "Kristy Shen",
                "url": "https://amzn.to/43NboW6"
            },
            {
                "title": "The One Page Financial Plan",
                "author": "Carl Richards",
                "url": "https://amzn.to/3Hx3t7w"
            }
            ],
            "Financially Free": [
            {
                "title": "Die With Zero",
                "author": "Bill Perkins",
                "url": "https://amzn.to/3Z99rSl"
            },
            {
                "title": "Financial Freedom",
                "author": "Grant Sabatier",
                "url": "https://amzn.to/3SZ0jfh"
            }
            ],
            "Asset-Rich, Cash-Poor": [
            {
                "title": "Retire Before Mom and Dad",
                "author": "Rob Berger",
                "url": "https://amzn.to/3HhSOOa"
            },
            {
                "title": "Unlocking Millions: The Ultimate Guide to Using and Investing with the HELOC",
                "author": "Tyler Wehrung",
                "url": "https://amzn.to/3Z880DF"
            }
            ]
        },
        "classes": {
            "Lower Class": [
            {
                "title": "$2.00 a Day: Living on Almost Nothing in America",
                "author": "Edin & Shaefer",
                "url": "https://amzn.to/4kBgX0u"
            }
            ],
            "Lower-Middle Class": [
            {
                "title": "The Simple Path to Wealth",
                "author": "JL Collins",
                "url": "https://amzn.to/3ZGiZ7i"
            }
            ],
            "Middle Class": [
            {
                "title": "The Millionaire Next Door",
                "author": "Thomas Stanley",
                "url": "https://amzn.to/4mFRrce"
            }
            ],
            "Upper-Middle Class": [
            {
                "title": "Tax-Free Wealth",
                "author": "Tom Wheelwright",
                "url": "https://amzn.to/4kLMEo0"
            }
            ],
            "Affluent": [
            {
                "title": "The Bogleheads’ Guide to Investing",
                "author": "Larimore, Lindauer, LeBoeuf",
                "url": "https://amzn.to/4kBgSKe"
            }
            ],
            "High Net Worth Individual": [
            {
                "title": "Family Wealth: Keeping It in the Family",
                "author": "James E. Hughes Jr.",
                "url": "https://amzn.to/43EX6q6"
            }
            ],
            "Wealth Elite": [
            {
                "title": "Wealth: Grow It, Protect It, Spend It, and Share It",
                "author": "Stuart Lucas",
                "url": "https://amzn.to/3T0dtJ3"
            }
            ],
            "Upper Class": [
            {
                "title": "Rich Dad's Guide to Investing",
                "author": "Robert Kiyosaki",
                "url": "https://amzn.to/43qjXHq"
            }
            ]
        }
    }

    const elements = ["income", "expenses", "liquid", "hard"];
    elements.forEach(id => document.getElementById(id).addEventListener("change", classify));
    function determineClassLevel(incomeI, liquidI, hardI) {
        const wealthIndex = (liquidI + hardI) / 2;

        if (incomeI <= 1 && wealthIndex <= 1) return "Lower Class";
        if (incomeI <= 2 && wealthIndex <= 2) return "Lower-Middle Class";
        if (incomeI <= 3 && wealthIndex <= 3) return "Middle Class";
        if (incomeI <= 4 && wealthIndex <= 4) return "Upper-Middle Class";
        if (incomeI <= 5 && wealthIndex <= 5) return "Affluent";
        if (incomeI === 6 && wealthIndex >= 6) return "High Net Worth Individual";
        if (incomeI === 6 && wealthIndex === 7) return "Wealth Elite";

        return "Upper Class";
    }

    function renderResources(feeling, classLevel) {
        const containerFeelings = document.getElementById('resources-feelings');
        const containerClasses = document.getElementById('resources-classes');
        const feelingLinks = resources.feelings[feeling] || [];
        const classLinks = resources.classes[classLevel] || [];

        let htmlFeelings = "";
        function renderLink({ title, author, url }) {
            const safeAuthor = author && author.trim() !== "" ? ` by ${author}` : "";
            return `<li><a href="${url}?tag=yourtag-20" target="_blank">${title}</a>${safeAuthor}</li>`;
        }
        
        if (feelingLinks.length > 0) {
            htmlFeelings += `<h3>Resources</h3><ul>`;
            feelingLinks.forEach(link => {
            htmlFeelings += renderLink(link);
            });
            htmlFeelings += "</ul>";
        }
        containerFeelings.innerHTML = htmlFeelings || `<p>No recommended resources found.</p>`;

        let htmlClasses = "";

        if (classLinks.length > 0) {
            htmlClasses += `<h3>Resources</h3><ul>`;
            classLinks.forEach(link => {
            htmlClasses += renderLink(link);
            });
            htmlClasses += "</ul>";
        }

        containerClasses.innerHTML = htmlClasses || `<p>No recommended resources found.</p>`;
    }
    function getWealthPercentile(incomeI, liquidI, hardI) {
      const score = incomeI * 2 + liquidI + hardI;

      if (score <= 4) return "Bottom 20% (Global)";
      if (score <= 6) return "Bottom 40% (Global)";
      if (score <= 8) return "Middle 40–60% (U.S. average)";
      if (score <= 10) return "Top 30% (U.S.)";
      if (score <= 12) return "Top 20% (U.S.)";
      if (score <= 14) return "Top 10% (U.S.)";
      return "Top 5% or higher (U.S./Global)";
    }

    function getProfile(incomeVal, expenseVal, liquidVal, hardVal, debtVal) {
      const netWorth = liquidVal + hardVal - debtVal;
      const yearsOfExpenses = expenseVal > 0 ? netWorth / expenseVal : 0;

      // 1. Financially Independent: 25+ years of expenses covered and low/no debt
      if (yearsOfExpenses >= 25 && debtVal <= 30000) {
        return "Financially Independent";
      }

      // 2. Multi-Generational Wealth: Extremely high assets
      if (hardVal >= 10000000 && liquidVal >= 500000 && netWorth >= 5000000) {
        return "Multi-Generational Wealth";
      }

      // 3. Outwardly Wealthy, Internally Stressed
      if (incomeVal >= 180000 && expenseVal >= 160000 && liquidVal < 60000 && debtVal >= 100000) {
        return "Outwardly Wealthy, Internally Stressed";
      }

      // 4. House Rich, Cash Poor
      if (hardVal >= 1000000 && liquidVal <= 25000 && netWorth >= 500000) {
        return "House Rich, Cash Poor";
      }

      // 5. Debt-Weighted
      if (debtVal >= 100000 && expenseVal >= 60000 && netWorth <= 250000) {
        return "Debt-Weighted";
      }

      // 6. Scraping By
      if (incomeVal <= 30000 && liquidVal <= 3000 && debtVal <= 5000 && expenseVal >= incomeVal) {
        return "Scraping By";
      }

      // 7. Underwater
      if (incomeVal <= 20000 && expenseVal > 40000 && debtVal > 50000) {
        return "Underwater";
      }

      // 8. Growth-Oriented Investor
      if (netWorth >= 1000000 && incomeVal >= 180000 && debtVal < 100000) {
        return "Growth-Oriented Investor";
      }

      // 9. Comfortably Liquid
      if (liquidVal >= 100000 && netWorth >= 400000 && incomeVal >= 100000 && debtVal <= 50000) {
        return "Comfortably Liquid";
      }

      // 10. Cashflow Positive, Asset Light
      if (incomeVal >= 100000 && liquidVal >= 60000 && netWorth <= 250000 && debtVal <= 50000) {
        return "Cashflow Positive, Asset Light";
      }

      // 11. Building Margin
      if (incomeVal > expenseVal && liquidVal >= 15000 && netWorth <= 200000) {
        return "Building Margin";
      }

      // 12. Fragile Middle
      return "Fragile Middle";
    }

    function classify() {
      const income = document.getElementById('income').value;
      const expenses = document.getElementById('expenses').value;
      const liquid = document.getElementById('liquid').value;
      const hard = document.getElementById('hard').value;
      const debt = document.getElementById('debt').value;

      const incomeI = incomeRanks.indexOf(income);
      const expenseI = incomeRanks.indexOf(expenses);
      const liquidI = assetRanks.indexOf(liquid);
      const hardI = assetRanks.indexOf(hard);
      const debtI = debtRanks.indexOf(debt);

      const incomeVal = incomeValues[income];
      const expenseVal = expenseValues[expenses];
      const liquidVal = liquidValues[liquid];
      const hardVal = hardValues[hard];
      const debtVal = debtValues[debt];

      const netWorth = liquidVal + hardVal - debtVal;
      const yearsOfExpenses = expenseVal > 0 ? netWorth / expenseVal : 0;


      let feeling = "Stable";

      if (incomeI <= 1 && expenseI >= 2 && liquidI <= 2) {
        feeling = "Surviving";
      } else if (incomeI <= 2 && expenseI >= incomeI && liquidI <= 3) {
        feeling = "Struggling";
      } else if (incomeI === expenseI && [2, 3].includes(liquidI)) {
        feeling = "Treading Water";
      } else if (incomeI >= 3 && incomeI > expenseI && liquidI >= 3) {
        if (hardI >= 4) {
          if (incomeI >= 5 && liquidI >= 5 && hardI >= 5) {
            if (incomeI === 6 || liquidI === 7 || hardI === 7) {
              feeling = "Affluent";
            } else if (incomeI === 6 && liquidI === 7 && hardI === 7) {
              feeling = "Wealthy Elite";
            } else {
              feeling = "High Net Worth";
            }
          } else {
            feeling = "Comfortable";
          }
        } else {
          feeling = "Stable";
        }
      } else if (incomeI >= 4 && expenseI >= 4 && liquidI <= 3) {
        feeling = "Overstretched";
      } else if (hardI >= 5 && liquidI <= 2 && incomeI <= 2) {
        feeling = "Asset-Rich, Cash-Poor";
      } else if (incomeI >= 5 && liquidI >= 5 && hardI >= 5 && expenseI <= 3) {
        feeling = "Financially Free";
      } else if (incomeI >= 3 && incomeI > expenseI) {
        feeling = "Building Up";
      }

        document.getElementById('result').innerText = "Classification: " + feeling;

        const classLevel = determineClassLevel(incomeI, liquidI, hardI);
        document.getElementById('class-level').innerText = "Class Level: " + classLevel;

        const perceivedValue = document.getElementById('perception').value;
        if (perceivedValue && perceivedValue !== classLevel) {
          document.getElementById('perception-warning').innerHTML =
            `<p><strong>Note:</strong> You perceive yourself as <em>${perceivedValue}</em>, but based on your inputs, you likely fall under <em>${classLevel}</em>. This is a common bias due to local or peer-group comparisons.</p>`;
        } else {
          document.getElementById('perception-warning').innerHTML = "";
        }

        document.getElementById('percentile-info').innerText =
          "Estimated percentile position: " + getWealthPercentile(incomeI, liquidI, hardI);

        const classInfo = classDescriptions[classLevel];
        document.getElementById('class-description').innerHTML = classInfo
        ? `<p><strong>Class Description:</strong><br>${classInfo.desc}</p>
            <p><strong>Steps to improve:</strong><br>${classInfo.steps}</p>`
        : "";

        const profile = getProfile(incomeVal, expenseVal, liquidVal, hardVal, debtVal);
        const profileInfo = profileMap[profile];
        document.getElementById('details').innerHTML = profileInfo
          ? `<p><strong>Profile:</strong> ${profile}</p>
            <p><strong>What this means:</strong> ${profileInfo.desc}</p>
            <p><strong>Steps forward:</strong> ${profileInfo.steps}</p>`
          : "";

        renderResources(feeling, classLevel);
    }

    // Trigger initial classification on page load
    classify();
  </script>

</body>
</html>
